<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Assigning Articles to Evaluators • Reproducibility_in_plant_pathology</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Assigning Articles to Evaluators">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Reproducibility.in.Plant.Pathology</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/assigning_articles.html">Assigning Articles to Evaluators</a>
    </li>
    <li>
      <a href="../articles/reproducibility_criteria.html">Criteria for Evaluating Reproducibility</a>
    </li>
    <li>
      <a href="../articles/retrieving_references.html">Retrieving References Using DOI</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Assigning Articles to Evaluators</h1>
                        <h4 class="author">Adam H Sparks</h4>
            
            <h4 class="date">2018-04-09</h4>
      
      <small>Source: <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology/blob/master/vignettes/assigning_articles.Rmd"><code>vignettes/assigning_articles.Rmd</code></a></small>
      <div class="hidden name"><code>assigning_articles.Rmd</code></div>

    </div>

    
    
<div id="creating-a-sample-of-articles" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-sample-of-articles" class="anchor"></a>Creating a sample of articles</h2>
<p>Twenty one journals in the discipline of plant pathology were selected by the four authors as being the primary choice for most plant pathologists when publishing manuscripts.</p>
<p>Using the assumption that journals publish an average 10 articles per issue, for a population of ~1000 articles, using a confidence level of 95% and confidence interval of 10% we need 88 samples. In <a href="https://github.com/adamhsparks/Reproducibility_in_Plant_Pathology/issues/3">Issue #3</a>, we decided to select 200 articles to have a large sample of the population.</p>
<p>There are three distinct steps involved:</p>
<ol style="list-style-type: decimal">
<li><p>Set up the journals, years, and page numbers and evaluators and assign randomly. Create a tibble that holds these data along with empty fields for the evaluation of the articles. Create a Google Sheets object to serve as a template for the second step.</p></li>
<li><p>Look up the articles and check that the selected journal, year, page number actually are appropriate and enter the DOI and other comments regarding article selection in Google Sheets. Which is used in the third step.</p></li>
<li><p>Import article notes and DOIs from Google Sheets back to R, retrieve as many bib entries as possible using the DOI. Merge the bib entries with the notes and DOI values. Create a new tab in the Google Sheets object for the evaluators to carry out evaluations.</p></li>
</ol>
</div>
<div id="step-1" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1" class="anchor"></a>Step 1</h2>
<div id="r-setup" class="section level3">
<h3 class="hasAnchor">
<a href="#r-setup" class="anchor"></a>R setup</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(bib2df)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(googlesheets)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">library</span>(Reproducibility.in.Plant.Pathology)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co"># For printing tibble in total</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="kw">options</span>(<span class="dt">tibble.print_max =</span> <span class="dv">21</span>, <span class="dt">tibble.print_min =</span> <span class="dv">21</span>)</a></code></pre></div>
</div>
<div id="create-list-of-journals" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-journals" class="anchor"></a>Create list of journals</h3>
<p>We hand-picked a list of 21 journals that we felt represented plant pathology research. In this step, we will create a <code>tibble</code> in R of these journals, assigning them a number so that we can randomise them.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">journal_list &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">21</span>),</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">c</span>(<span class="st">"Australasian Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="st">"Canadian Journal of Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="st">"Crop Protection"</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="st">"European Journal of Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="st">"Forest Pathology"</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="st">"Journal of General Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="st">"Journal of Phytopathology"</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="st">"Journal of Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="st">"Virology Journal (Plant Viruses Section)"</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="st">"Molecular Plant-Microbe Interactions"</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="st">"Molecular Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="st">"Nematology"</span>,</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">    <span class="st">"Physiological and Molecular Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="st">"Phytoparasitica"</span>,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="st">"Phytopathologia Mediterranea"</span>,</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">    <span class="st">"Phytopathology"</span>,</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    <span class="st">"Plant Disease"</span>,</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    <span class="st">"Plant Health Progress"</span>,</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">    <span class="st">"Plant Pathology"</span>,</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    <span class="st">"Revista Mexicana de Fitopatología"</span>,</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">    <span class="st">"Tropical Plant Pathology"</span>))</a>
<a class="sourceLine" id="cb2-24" data-line-number="24"></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="kw">names</span>(journal_list) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"number"</span>, <span class="st">"journal"</span>)</a></code></pre></div>
</div>
<div id="create-list-of-evaluators" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-evaluators" class="anchor"></a>Create list of evaluators</h3>
<p>From the four authors of this paper, in this step, we will create a list for us to use that will randomly assign articles for us to evaluate for this manuscript.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">assignee &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"Adam"</span>, <span class="st">"Emerson"</span>, <span class="st">"Zach"</span>, <span class="st">"Nik"</span>), <span class="dv">50</span>)</a></code></pre></div>
</div>
<div id="create-randomised-list" class="section level3">
<h3 class="hasAnchor">
<a href="#create-randomised-list" class="anchor"></a>Create randomised list</h3>
<p>Now we will create a randomised list of journal articles to assign to each of the four authors for this paper.</p>
<div id="create-a-randomised-list-of-the-journals" class="section level4">
<h4 class="hasAnchor">
<a href="#create-a-randomised-list-of-the-journals" class="anchor"></a>Create a randomised list of the journals</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">journals &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="kw"><a href="http://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">21</span>, <span class="dv">200</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">names</span>(journals) &lt;-<span class="st"> "number"</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">journals &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(journals, journal_list, <span class="st">"number"</span>)</a></code></pre></div>
</div>
<div id="randomly-select-articles" class="section level4">
<h4 class="hasAnchor">
<a href="#randomly-select-articles" class="anchor"></a>Randomly select articles</h4>
<p>Generate a random list of years between 2012 and 2016 and a random list of start pages between 1 and 150 since some journals start numbering at 1 with every issue. Then bind the columns of the randomised list of journals with the randomised years and page start numbers. This then assumes that there is no temporal effect, <em>i.e.</em>, the time of year an article is published does not affect whether or not it is reproducible.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">year &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="dv">2012</span><span class="op">:</span><span class="dv">2016</span>, <span class="dv">200</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">contains_page &lt;-<span class="st"> </span><span class="kw">sample.int</span>(<span class="dv">150</span>, <span class="dv">200</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">journals &lt;-<span class="st"> </span><span class="kw">cbind</span>(journals[, <span class="dv">-1</span>], year, contains_page, assignee)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">journals &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="dt">.data =</span> journals, assignee, journal, year, contains_page)</a></code></pre></div>
</div>
<div id="check-the-number-of-articles-per-journal" class="section level4">
<h4 class="hasAnchor">
<a href="#check-the-number-of-articles-per-journal" class="anchor"></a>Check the number of articles per journal</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">journals <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(journal) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">tally</a></span>(<span class="dt">sort =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## # A tibble: 21 x 2
##    journal                                         n
##    &lt;chr&gt;                                       &lt;int&gt;
##  1 Molecular Plant Pathology                      15
##  2 Plant Pathology                                14
##  3 Phytoparasitica                                13
##  4 Phytopathology                                 13
##  5 Journal of General Plant Pathology             12
##  6 Journal of Plant Pathology                     11
##  7 Physiological and Molecular Plant Pathology    11
##  8 Plant Disease                                  11
##  9 Virology Journal (Plant Viruses Section)       11
## 10 Molecular Plant-Microbe Interactions           10
## 11 Crop Protection                                 9
## 12 Forest Pathology                                9
## 13 European Journal of Plant Pathology             8
## 14 Revista Mexicana de Fitopatología               8
## 15 Canadian Journal of Plant Pathology             7
## 16 Journal of Phytopathology                       7
## 17 Nematology                                      7
## 18 Phytopathologia Mediterranea                    7
## 19 Plant Health Progress                           7
## 20 Tropical Plant Pathology                        6
## 21 Australasian Plant Pathology                    4</code></pre>
<p>Once this is done, the articles are manually examined for suitability. Reference articles or off-topic articles are not included. Notes are provided regarding these cases in <code>assigned_article_notes</code>. If the selected page number/article was not suitable, the next sequential article was selected manually.</p>
</div>
</div>
<div id="add-empty-columns-for-evaluations" class="section level3">
<h3 class="hasAnchor">
<a href="#add-empty-columns-for-evaluations" class="anchor"></a>Add empty columns for evaluations</h3>
<p>A variety of information will be collected with each article to be used in the analysis later. It is easiest to enter this using a spreadsheet application, so we will add on the columns for what information we want to collect and save the table as a csv for manual editing.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">to_record &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="st">"doi"</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="st">"IF_5year"</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="st">"country"</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="st">"open"</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  <span class="st">"repro_inst"</span>,</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">  <span class="st">"iss_per_year"</span>,</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  <span class="st">"art_class"</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">  <span class="st">"supl_mats"</span>,</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">  <span class="st">"comp_mthds_avail"</span>,</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">  <span class="st">"software_avail"</span>,</a>
<a class="sourceLine" id="cb8-12" data-line-number="12">  <span class="st">"software_cite"</span>,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">  <span class="st">"analysis_auto"</span>,</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">  <span class="st">"data_avail"</span>,</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">  <span class="st">"data_annot"</span>,</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">  <span class="st">"data_tidy"</span>,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">  <span class="st">"reproducibility_score"</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">  )</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">  journals[to_record] &lt;-<span class="st"> ""</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb8-21" data-line-number="21">  journals &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="st">    </span>journals <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(assignee) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</a></code></pre></div>
</div>
<div id="write-to-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#write-to-google-sheets" class="anchor"></a>Write to Google Sheets</h3>
<p>We decided to use Google Sheets so that we could concurrently edit the file more easily. Once we’re done filling in our evaluations, we will import the data back to R. Jenny Bryan has created a handy package, <em>googlesheets</em> that we use here. <em>Note that this must be run interactively for <code><a href="http://www.rdocumentation.org/packages/googlesheets/topics/gs_new">gs_new()</a></code> to work. Knitting this .Rmd file will not generate any gsheets, it must be done in an interactive R session.</em></p>
<p>Create a Google Sheets workbook to hold worksheets for this project. This first sheet will serve as a template and is thus named “template”.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Give googlesheets permission to access spreadsheets and Google Drive</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="http://www.rdocumentation.org/packages/googlesheets/topics/gs_auth">gs_auth</a></span>()</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># create Google Sheet for concurrent edits, first sheet: article notes template</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw"><a href="http://www.rdocumentation.org/packages/googlesheets/topics/gs_new">gs_new</a></span>(</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="st">"article_notes"</span>,</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">  <span class="dt">ws_title =</span> <span class="st">"template"</span>,</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  <span class="dt">input =</span> journals,</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">  <span class="dt">trim =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">  <span class="dt">verbose =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11">  )</a></code></pre></div>
</div>
</div>
<div id="step-2" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2" class="anchor"></a>Step 2</h2>
<div id="add-article-dois" class="section level3">
<h3 class="hasAnchor">
<a href="#add-article-dois" class="anchor"></a>Add article DOI’s</h3>
<p>This step is completed in gsheets, Adam looked up articles and added notes and DOIs to a gsheet, “article_notes” which will be imported to R in the next step.</p>
</div>
</div>
<div id="step-3" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3" class="anchor"></a>Step 3</h2>
<div id="generate-a-bibliography-file-to-use-with-the-paper" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-a-bibliography-file-to-use-with-the-paper" class="anchor"></a>Generate a bibliography file to use with the paper</h3>
<p>Using the DOIs in this file, we can retrieve the BibTex citations for those articles that provide a DOI. Note that not all of the selected articles have a DOI, so we’ll have to manually generate those entries, or fetch them from the journals’ website later.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">article_notes &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/googlesheets/topics/googlesheet">gs_title</a></span>(<span class="st">"article_notes"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">notes &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span>article_notes <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/googlesheets/topics/gs_read">gs_read</a></span>(<span class="dt">ws =</span> <span class="st">"article_notes"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co"># format DOIs to all be uniform, lower-case</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">notes<span class="op">$</span>doi &lt;-<span class="st"> </span><span class="kw">tolower</span>(notes<span class="op">$</span>doi)</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co"># convert encodings for text with accents</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11">notes<span class="op">$</span>journal &lt;-<span class="st"> </span><span class="kw">iconv</span>(notes<span class="op">$</span>journal, <span class="st">"latin1"</span>, <span class="st">"UTF-8"</span>) </a>
<a class="sourceLine" id="cb10-12" data-line-number="12"></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co"># get bib references from the DOI (that exist)</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14">bib &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(notes<span class="op">$</span>doi, doi2bib))</a></code></pre></div>
<p>The <em>Journal of Plant Pathology</em> does not supply valid bib entries via the DOI. So we need to clean them up.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># locations of Journal of "Plant Pathology"" entries in bib object</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">clean_pp &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"journal=</span><span class="ch">\\</span><span class="st">{Journal of Plant Pathology</span><span class="ch">\\</span><span class="st">}"</span>, bib)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co"># create a dataset of just those bib entries</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">bib_clean_pp &lt;-<span class="st"> </span>bib[clean_pp]</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co"># function to clean the entries</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8">clean_articles_pp &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">  title_loc &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">gregexpr</span>(<span class="dt">pattern =</span> <span class="st">"title"</span>, x))</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">  y &lt;-<span class="st"> </span><span class="kw">substr</span>(x, <span class="dt">start =</span> title_loc[<span class="dv">1</span>], <span class="dt">stop =</span> <span class="kw">nchar</span>(x))</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">  y &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">"@article{jpp,</span><span class="ch">\n\t</span><span class="st">"</span> , y)</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">  y &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"}, "</span>, <span class="st">"},</span><span class="ch">\n\t</span><span class="st">"</span>, y)</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">  y &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"="</span>, <span class="st">" = "</span>, y)</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">  y &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"}}</span><span class="ch">\n</span><span class="st">"</span>, <span class="st">"}</span><span class="ch">\n</span><span class="st">}"</span>, y)</a>
<a class="sourceLine" id="cb11-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb11-16" data-line-number="16"></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co"># apply function and clean the bib entries</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18">cleaned_pp &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(bib_clean_pp, clean_articles_pp))</a>
<a class="sourceLine" id="cb11-19" data-line-number="19"></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co"># remove the incorrect entries for Journal of Plant Pathology</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21">bib &lt;-<span class="st"> </span>bib[<span class="op">-</span>clean_pp]</a></code></pre></div>
<p><em>Phytopathologia Mediterranea</em> also provides some malformed bib entries. The cite entries are malformed and <code>&lt;em&gt; &lt;/em&gt;</code> is used rather than the proper <code>\textit{}</code> for a BibTeX file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">clean_pm &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="st">"journal=</span><span class="ch">\\</span><span class="st">{Phytopathologia Mediterranea</span><span class="ch">\\</span><span class="st">}"</span>, bib)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">bib_clean_pm &lt;-<span class="st"> </span>bib[clean_pm]</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">clean_articles_pm &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">  x &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">" @article</span><span class="ch">\\</span><span class="st">{[[:print:]]+, title=</span><span class="ch">\\</span><span class="st">{"</span>, <span class="st">"@article</span><span class="ch">\\</span><span class="st">{PM, title = </span><span class="ch">\\</span><span class="st">{"</span>, x)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">  x &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"&lt;em&gt;"</span>, <span class="st">"</span><span class="ch">\\\t</span><span class="st">extit</span><span class="ch">\\</span><span class="st">{"</span>, x)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">  x &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"&lt;/em&gt;"</span>, <span class="st">"}"</span>, x)</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co"># apply function and clean the bib entries</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">cleaned_pm &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(bib_clean_pm, clean_articles_pm))</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">bib &lt;-<span class="st"> </span>bib[<span class="op">-</span>clean_pm]</a></code></pre></div>
<p>The larger list of bib objects has some items that are supposedly invalid DOIs. In this step we remove them and clean up the list. They’ll be added back to the database when we merge the notes at the end.</p>
<p>Also there are duplicates in the list somehow. Use <code>unique()</code> to clean the list up.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">bib &lt;-<span class="st"> </span>bib[bib <span class="op">!=</span><span class="st"> "Invalid DOI"</span>]</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">bib &lt;-<span class="st"> </span><span class="kw">unique</span>(bib)</a></code></pre></div>
<p>Next export the items as files to disk as .bib files to be cleaned using JabRef. This will automatically assign unique cite keys and fix some issues with characters in the bib file. Open the file in JabRef and click “yes” when prompted to regarding the cite keys.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># clean up any existing files since we're appending</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">unlink</span>(<span class="st">"~/tmp/bib_article_notes.bib"</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># write files to a local directory and clean up with JabRef</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="kw">lapply</span>(<span class="kw">unlist</span>(bib), write, <span class="st">"~/tmp/bib_article_notes.bib"</span>, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="kw">lapply</span>(<span class="kw">unlist</span>(cleaned_pp), write, <span class="st">"~/tmp/bib_article_notes.bib"</span>, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="kw">lapply</span>(<span class="kw">unlist</span>(cleaned_pm), write, <span class="st">"~/tmp/bib_article_notes.bib"</span>, <span class="dt">append =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><em>Important</em> Open resulting files in <code>~/tmp</code> directory in JabRef, create new keys and resave. JabRef will generate unique keys and fix any inconsistencies that may exist from the DOI search.</p>
</div>
<div id="export-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#export-google-sheets" class="anchor"></a>Export Google Sheets</h3>
<p>In this last bit, import the BibTeX file back into R and export to a tab in the Google Sheets for collaborative edits.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># import both the Journal of Plant Pathology (cleaned_bib) and article_notes.bib</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">bib &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/bib2df/topics/bib2df">bib2df</a></span>(<span class="st">"~/tmp/bib_article_notes.bib"</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">names</span>(bib) &lt;-<span class="st"> </span><span class="kw">tolower</span>(<span class="kw">names</span>(bib))</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co"># join notes with bibliographic data</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6">bib_df &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(notes, bib)</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">bib_df &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(bib_df, assignee)</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co"># create Google Sheet for concurrent edits</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10">article_notes &lt;-</a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="st">  </span>article_notes <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/googlesheets/topics/gs_ws_new">gs_ws_new</a></span>(</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">    <span class="dt">ws_title =</span> <span class="st">"article_evaluations"</span>,</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">    <span class="dt">input =</span> bib_df,</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">    <span class="dt">trim =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">    <span class="dt">verbose =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17">    )</a>
<a class="sourceLine" id="cb15-18" data-line-number="18"></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co"># clean up files to build R package properly with no NOTES</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="kw">unlink</span>(<span class="st">".httr-oauth"</span>)</a></code></pre></div>
</div>
<div id="last-steps" class="section level3">
<h3 class="hasAnchor">
<a href="#last-steps" class="anchor"></a>Last steps</h3>
<p>The last few steps are completed outside of R in Google Docs, manually adding the missing information to the spreadsheet and the assignees adding their evaluations of their respective articles.</p>
<p>The Google Sheets can be found here: <a href="https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381" class="uri">https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-sample-of-articles">Creating a sample of articles</a></li>
      <li><a href="#step-1">Step 1</a></li>
      <li><a href="#step-2">Step 2</a></li>
      <li><a href="#step-3">Step 3</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Adam H. Sparks, Emerson M. Del Ponte, Sydney Everhart, Zachary S. L. Foster, Niklaus J. Grünwald.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
