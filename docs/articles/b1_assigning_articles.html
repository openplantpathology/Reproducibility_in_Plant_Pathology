<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Original Round of Assigning Articles to Evaluators • Reproducibility in Plant Pathology</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Original Round of Assigning Articles to Evaluators">
<meta property="og:description" content="Reproducibility.in.Plant.Pathology">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Reproducibility in Plant Pathology</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a_reproducibility_criteria.html">Criteria for Evaluating Reproducibility</a>
    </li>
    <li>
      <a href="../articles/b1_assigning_articles.html">Original Round of Assigning Articles to Evaluators</a>
    </li>
    <li>
      <a href="../articles/b2_assigning_articles.html">Second Round of Assigning Articles to Evaluators</a>
    </li>
    <li>
      <a href="../articles/c_retrieving_references.html">Retrieving References Using DOI</a>
    </li>
    <li>
      <a href="../articles/d_generate_final_bib.html">Generate Final .bib File of References Reviewed</a>
    </li>
    <li>
      <a href="../articles/e_visualisation.html">Data Visualisation</a>
    </li>
    <li>
      <a href="../articles/f_analysis_journal.html">Analysis of Journal Effect</a>
    </li>
    <li>
      <a href="../articles/g_analysis_art_class.html">Analysis of Article Class Effect</a>
    </li>
    <li>
      <a href="../articles/h_analysis_mol_focus.html">Analysis of Molecular Focus Effect</a>
    </li>
    <li>
      <a href="../articles/i_analysis_5y_if.html">Analysis of Five Year Impact Factor</a>
    </li>
    <li>
      <a href="../articles/j_analysis_access_policy.html">Analysis of Open Access Policy</a>
    </li>
    <li>
      <a href="../articles/k_analysis_year.html">Analysis of Publication Year Effect</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="b1_assigning_articles_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Original Round of Assigning Articles to Evaluators</h1>
                        <h4 class="author">Adam H. Sparks</h4>
            
            <h4 class="date">2021-06-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology/blob/master/vignettes/b1_assigning_articles.Rmd"><code>vignettes/b1_assigning_articles.Rmd</code></a></small>
      <div class="hidden name"><code>b1_assigning_articles.Rmd</code></div>

    </div>

    
    
<div id="creating-a-sample-of-articles" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-sample-of-articles" class="anchor"></a>Creating a sample of articles</h2>
<p>Twenty one journals in the discipline of plant pathology were selected by the authors as being the primary choice for most plant pathologists when publishing manuscripts.</p>
<p>Using the assumption that journals publish an average 10 articles per issue, for a population of ~1000 articles, using a confidence level of 95% and confidence interval of 10% we need 88 samples. In <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology/issues/3">Issue #3</a>, we decided to select 200 articles to have a large sample of the population.</p>
<p>There are three distinct steps involved:</p>
<ol style="list-style-type: decimal">
<li><p>Set up the journals, years, and page numbers and evaluators and assign randomly. Create a <code>tibble</code> that holds these data along with empty fields for the evaluation of the articles. Create a Google Sheets object to serve as a template for the second step.</p></li>
<li><p>Look up the articles and check that the selected journal, year, page number actually are appropriate and enter the DOI and other comments regarding article selection in Google Sheets. Which is used in the third step.</p></li>
<li><p>Import article notes and DOIs from Google Sheets back to R, retrieve as many bib entries as possible using the DOI. Merge the bib entries with the notes and DOI values. Create a new tab in the Google Sheets object for the evaluators to carry out evaluations.</p></li>
</ol>
</div>
<div id="step-1" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1" class="anchor"></a>Step 1</h2>
<div id="r-setup" class="section level3">
<h3 class="hasAnchor">
<a href="#r-setup" class="anchor"></a>R setup</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">"dplyr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://readr.tidyverse.org">"readr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/bib2df">"bib2df"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/tidyverse/googlesheets4">"googlesheets4"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://stringr.tidyverse.org">"stringr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology">"Reproducibility.in.Plant.Pathology"</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>

<span class="co"># For printing tibble in total</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>tibble.print_max <span class="op">=</span> <span class="fl">21</span>, tibble.print_min <span class="op">=</span> <span class="fl">21</span><span class="op">)</span></code></pre></div>
</div>
<div id="create-list-of-journals" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-journals" class="anchor"></a>Create list of journals</h3>
<p>We hand-picked a list of 21 journals that we felt represented plant pathology research. In this step, we will create a <code>tibble</code> in R of these journals, assigning them a number so that we can randomise them.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">journal_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Australasian Plant Pathology"</span>,
    <span class="st">"Canadian Journal of Plant Pathology"</span>,
    <span class="st">"Crop Protection"</span>,
    <span class="st">"European Journal of Plant Pathology"</span>,
    <span class="st">"Forest Pathology"</span>,
    <span class="st">"Journal of General Plant Pathology"</span>,
    <span class="st">"Journal of Phytopathology"</span>,
    <span class="st">"Journal of Plant Pathology"</span>,
    <span class="st">"Virology Journal (Plant Viruses Section)"</span>,
    <span class="st">"Molecular Plant-Microbe Interactions"</span>,
    <span class="st">"Molecular Plant Pathology"</span>,
    <span class="st">"Nematology"</span>,
    <span class="st">"Physiological and Molecular Plant Pathology"</span>,
    <span class="st">"Phytoparasitica"</span>,
    <span class="st">"Phytopathologia Mediterranea"</span>,
    <span class="st">"Phytopathology"</span>,
    <span class="st">"Plant Disease"</span>,
    <span class="st">"Plant Health Progress"</span>,
    <span class="st">"Plant Pathology"</span>,
    <span class="st">"Revista Mexicana de Fitopatología"</span>,
    <span class="st">"Tropical Plant Pathology"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">journal_list</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"number"</span>, <span class="st">"journal"</span><span class="op">)</span></code></pre></div>
</div>
<div id="create-list-of-evaluators" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-evaluators" class="anchor"></a>Create list of evaluators</h3>
<div id="first-round-of-reviews" class="section level4">
<h4 class="hasAnchor">
<a href="#first-round-of-reviews" class="anchor"></a>First round of reviews</h4>
<p>Initially, when we started this work we had four authors working together on it. For the four original authors of the paper we created a list for us to use that will randomly assign articles for us to evaluate for this manuscript.</p>
<p>Later we decided to add more authors and more articles. That work is detailed in this <a href="b2_assigning_articles">second document</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">assignees</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Adam"</span>, <span class="st">"Emerson"</span>, <span class="st">"Zach"</span>, <span class="st">"Nik"</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="create-randomised-list" class="section level3">
<h3 class="hasAnchor">
<a href="#create-randomised-list" class="anchor"></a>Create randomised list</h3>
<p>Now we will create a randomised list of journal articles to assign to each of the four authors for this paper.</p>
<div id="create-a-randomised-list-of-the-journals" class="section level4">
<h4 class="hasAnchor">
<a href="#create-a-randomised-list-of-the-journals" class="anchor"></a>Create a randomised list of the journals</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">journals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">21</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">journals</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"number"</span>

<span class="va">journals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">journals</span>, <span class="va">journal_list</span>, <span class="st">"number"</span><span class="op">)</span></code></pre></div>
</div>
<div id="randomly-select-articles" class="section level4">
<h4 class="hasAnchor">
<a href="#randomly-select-articles" class="anchor"></a>Randomly select articles</h4>
<p>Generate a random list of years between 2012 and 2016 and a random list of start pages between 1 and 150 since some journals start numbering at 1 with every issue. Then bind the columns of the randomised list of journals with the randomised years and page start numbers. This then assumes that there is no temporal effect, <em>i.e.</em>, the time of year an article is published does not affect whether or not it is reproducible.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">2012</span><span class="op">:</span><span class="fl">2016</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">contains_page</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">journals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">journals</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">year</span>, <span class="va">contains_page</span>, <span class="va">assignees</span><span class="op">)</span>

<span class="va">journals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">journals</span>, <span class="va">assignees</span>, <span class="va">journal</span>, <span class="va">year</span>, <span class="va">contains_page</span><span class="op">)</span></code></pre></div>
</div>
<div id="check-the-number-of-articles-per-journal" class="section level4">
<h4 class="hasAnchor">
<a href="#check-the-number-of-articles-per-journal" class="anchor"></a>Check the number of articles per journal</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">journals</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">journal</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">tally</a></span><span class="op">(</span>sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 21 x 2
##    journal                                         n
##    &lt;chr&gt;                                       &lt;int&gt;
##  1 Journal of General Plant Pathology             13
##  2 Phytoparasitica                                13
##  3 Journal of Phytopathology                      12
##  4 Molecular Plant-Microbe Interactions           12
##  5 Plant Pathology                                12
##  6 Tropical Plant Pathology                       12
##  7 Australasian Plant Pathology                   11
##  8 Canadian Journal of Plant Pathology            10
##  9 Nematology                                     10
## 10 Revista Mexicana de Fitopatología              10
## 11 Virology Journal (Plant Viruses Section)       10
## 12 Journal of Plant Pathology                      9
## 13 Phytopathology                                  9
## 14 Crop Protection                                 8
## 15 Forest Pathology                                8
## 16 Phytopathologia Mediterranea                    8
## 17 Plant Disease                                   8
## 18 Molecular Plant Pathology                       7
## 19 Plant Health Progress                           7
## 20 Physiological and Molecular Plant Pathology     6
## 21 European Journal of Plant Pathology             5</code></pre>
<p>Once this is done, the articles are manually examined for suitability. Reference articles or off-topic articles are not included. Notes are provided regarding these cases in <code>assigned_article_notes</code>. If the selected page number/article was not suitable, the next sequential article was selected manually.</p>
</div>
</div>
<div id="add-empty-columns-for-evaluations" class="section level3">
<h3 class="hasAnchor">
<a href="#add-empty-columns-for-evaluations" class="anchor"></a>Add empty columns for evaluations</h3>
<p>A variety of information will be collected with each article to be used in the analysis later. It is easiest to enter this using a spreadsheet application, so we will add on the columns for what information we want to collect and save the table as a csv for manual editing.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">to_record</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">"doi"</span>,
  <span class="st">"IF_5year"</span>,
  <span class="st">"country"</span>,
  <span class="st">"open"</span>,
  <span class="st">"repro_inst"</span>,
  <span class="st">"iss_per_year"</span>,
  <span class="st">"art_class"</span>,
  <span class="st">"supl_mats"</span>,
  <span class="st">"comp_mthds_avail"</span>,
  <span class="st">"software_avail"</span>,
  <span class="st">"software_cite"</span>,
  <span class="st">"analysis_auto"</span>,
  <span class="st">"data_avail"</span>,
  <span class="st">"data_annot"</span>,
  <span class="st">"data_tidy"</span>,
  <span class="st">"reproducibility_score"</span>
  <span class="op">)</span>
  <span class="va">journals</span><span class="op">[</span><span class="va">to_record</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">""</span>
  
  <span class="va">journals</span> <span class="op">&lt;-</span> 
    <span class="va">journals</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">assignees</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="write-to-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#write-to-google-sheets" class="anchor"></a>Write to Google Sheets</h3>
<p>We decided to use Google Sheets so that we could concurrently edit the file more easily. Once we’re done filling in our evaluations, we will import the data back to R. Jenny Bryan has created a handy package, <em>googlesheets4</em> that we use here. <em>Note that this must be run interactively for <code>gs_new()</code> to work. Knitting this .Rmd file will not generate any Google Sheets, it must be done in an interactive R session.</em></p>
<p>Create a Google Sheets workbook to hold worksheets for this project. This first sheet will serve as a template and is thus named “template”.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Give googlesheets4 permission to access spreadsheets and Google Drive</span>
<span class="fu">gs_auth</span><span class="op">(</span><span class="op">)</span>

<span class="co"># create Google Sheet for concurrent edits, first sheet: article notes template</span>
<span class="fu">gs_new</span><span class="op">(</span>
  <span class="st">"article_notes"</span>,
  ws_title <span class="op">=</span> <span class="st">"template"</span>,
  input <span class="op">=</span> <span class="va">journals</span>,
  trim <span class="op">=</span> <span class="cn">TRUE</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
  <span class="op">)</span></code></pre></div>
</div>
</div>
<div id="step-2" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2" class="anchor"></a>Step 2</h2>
<div id="add-article-dois" class="section level3">
<h3 class="hasAnchor">
<a href="#add-article-dois" class="anchor"></a>Add article DOI’s</h3>
<p>This step is completed in Google Sheets, Adam looked up articles and added notes and DOIs to a Google Sheet, “article_notes” which will be imported to R in the next step.</p>
</div>
</div>
<div id="step-3" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3" class="anchor"></a>Step 3</h2>
<div id="generate-a-bibliography-file-to-use-with-the-paper" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-a-bibliography-file-to-use-with-the-paper" class="anchor"></a>Generate a bibliography file to use with the paper</h3>
<p>Using the DOIs in this file, we can retrieve the BibTex citations for those articles that provide a DOI. Note that not all of the selected articles have a DOI, so we’ll have to manually generate those entries, or fetch them from the journals’ website later.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"doi2bib"</span><span class="op">)</span>
<span class="va">article_notes</span> <span class="op">&lt;-</span> <span class="fu">gs_title</span><span class="op">(</span><span class="st">"article_notes"</span><span class="op">)</span>

<span class="va">notes</span> <span class="op">&lt;-</span> 
  <span class="va">article_notes</span> <span class="op">%&gt;%</span> 
    <span class="fu">gs_read</span><span class="op">(</span>ws <span class="op">=</span> <span class="st">"article_notes"</span><span class="op">)</span>
  
<span class="co"># format DOIs to all be uniform, lower-case</span>
<span class="va">notes</span><span class="op">$</span><span class="va">doi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">notes</span><span class="op">$</span><span class="va">doi</span><span class="op">)</span>

<span class="co"># convert encodings for text with accents</span>
<span class="va">notes</span><span class="op">$</span><span class="va">journal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/iconv.html">iconv</a></span><span class="op">(</span><span class="va">notes</span><span class="op">$</span><span class="va">journal</span>, <span class="st">"latin1"</span>, <span class="st">"UTF-8"</span><span class="op">)</span> 

<span class="co"># get bib references from the DOI (that exist)</span>
<span class="va">bib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">notes</span><span class="op">$</span><span class="va">doi</span>, <span class="va">doi2bib</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The <em>Journal of Plant Pathology</em> does not supply valid bib entries via the DOI. So we need to clean them up.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># locations of Journal of "Plant Pathology"" entries in bib object</span>
<span class="va">clean_pp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"journal=\\{Journal of Plant Pathology\\}"</span>, <span class="va">bib</span><span class="op">)</span>

<span class="co"># create a dataset of just those bib entries</span>
<span class="va">bib_clean_pp</span> <span class="op">&lt;-</span> <span class="va">bib</span><span class="op">[</span><span class="va">clean_pp</span><span class="op">]</span>

<span class="co"># function to clean the entries</span>
<span class="va">clean_articles_pp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">title_loc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gregexpr</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"title"</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>, start <span class="op">=</span> <span class="va">title_loc</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, stop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"@article{jpp,\n\t"</span> , <span class="va">y</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"}, "</span>, <span class="st">"},\n\t"</span>, <span class="va">y</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"="</span>, <span class="st">" = "</span>, <span class="va">y</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"}}\n"</span>, <span class="st">"}\n}"</span>, <span class="va">y</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># apply function and clean the bib entries</span>
<span class="va">cleaned_pp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">bib_clean_pp</span>, <span class="va">clean_articles_pp</span><span class="op">)</span><span class="op">)</span>

<span class="co"># remove the incorrect entries for Journal of Plant Pathology</span>
<span class="va">bib</span> <span class="op">&lt;-</span> <span class="va">bib</span><span class="op">[</span><span class="op">-</span><span class="va">clean_pp</span><span class="op">]</span></code></pre></div>
<p><em>Phytopathologia Mediterranea</em> also provides some malformed bib entries. The cite entries are malformed and <code>&lt;em&gt; &lt;/em&gt;</code> is used rather than the proper <code>\textit{}</code> for a BibTeX file.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">clean_pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"journal=\\{Phytopathologia Mediterranea\\}"</span>, <span class="va">bib</span><span class="op">)</span>
<span class="va">bib_clean_pm</span> <span class="op">&lt;-</span> <span class="va">bib</span><span class="op">[</span><span class="va">clean_pm</span><span class="op">]</span>
<span class="va">clean_articles_pm</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">" @article\\{[[:print:]]+, title=\\{"</span>, <span class="st">"@article\\{PM, title = \\{"</span>, <span class="va">x</span><span class="op">)</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"&lt;em&gt;"</span>, <span class="st">"\\\textit\\{"</span>, <span class="va">x</span><span class="op">)</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"&lt;/em&gt;"</span>, <span class="st">"}"</span>, <span class="va">x</span><span class="op">)</span>
  <span class="op">}</span>

<span class="co"># apply function and clean the bib entries</span>
<span class="va">cleaned_pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">bib_clean_pm</span>, <span class="va">clean_articles_pm</span><span class="op">)</span><span class="op">)</span>
<span class="va">bib</span> <span class="op">&lt;-</span> <span class="va">bib</span><span class="op">[</span><span class="op">-</span><span class="va">clean_pm</span><span class="op">]</span></code></pre></div>
<p>The larger list of bib objects has some items that are supposedly invalid DOIs. In this step we remove them and clean up the list. They’ll be added back to the database when we merge the notes at the end.</p>
<p>Also there are duplicates in the list somehow. Use <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> to clean the list up.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bib</span> <span class="op">&lt;-</span> <span class="va">bib</span><span class="op">[</span><span class="va">bib</span> <span class="op">!=</span> <span class="st">"Invalid DOI"</span><span class="op">]</span>

<span class="va">bib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">bib</span><span class="op">)</span></code></pre></div>
<p>Next export the items as files to disk as .bib files to be cleaned using JabRef. This will automatically assign unique cite keys and fix some issues with characters in the bib file. Open the file in JabRef and click “yes” when prompted to regarding the cite keys.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># clean up any existing files since we're appending</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">"~/tmp/bib_article_notes.bib"</span><span class="op">)</span>

<span class="co"># write files to a local directory and clean up with JabRef</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">bib</span><span class="op">)</span>, <span class="va">write</span>, <span class="st">"~/tmp/bib_article_notes.bib"</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">cleaned_pp</span><span class="op">)</span>, <span class="va">write</span>, <span class="st">"~/tmp/bib_article_notes.bib"</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">cleaned_pm</span><span class="op">)</span>, <span class="va">write</span>, <span class="st">"~/tmp/bib_article_notes.bib"</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><em>Important</em> Open resulting files in <code>~/tmp</code> directory in JabRef, create new keys and resave. JabRef will generate unique keys and fix any inconsistencies that may exist from the DOI search.</p>
</div>
<div id="export-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#export-google-sheets" class="anchor"></a>Export Google Sheets</h3>
<p>In this last bit, import the BibTeX file back into R and export to a tab in the Google Sheets for collaborative edits.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import both the Journal of Plant Pathology (cleaned_bib) and article_notes.bib</span>
<span class="va">bib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/bib2df/reference/bib2df.html">bib2df</a></span><span class="op">(</span><span class="st">"~/tmp/bib_article_notes.bib"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bib</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bib</span><span class="op">)</span><span class="op">)</span>

<span class="co"># join notes with bibliographic data</span>
<span class="va">bib_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">notes</span>, <span class="va">bib</span><span class="op">)</span>
<span class="va">bib_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">bib_df</span>, <span class="va">assignees</span><span class="op">)</span>

<span class="co"># create Google Sheet for concurrent edits</span>
<span class="va">article_notes</span> <span class="op">&lt;-</span>
  <span class="va">article_notes</span> <span class="op">%&gt;%</span>
    <span class="fu">gs_ws_new</span><span class="op">(</span>
    ws_title <span class="op">=</span> <span class="st">"article_evaluations"</span>,
    input <span class="op">=</span> <span class="va">bib_df</span>,
    trim <span class="op">=</span> <span class="cn">TRUE</span>,
    verbose <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>

<span class="co"># clean up files to build R package properly with no NOTES</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">".httr-oauth"</span><span class="op">)</span></code></pre></div>
</div>
<div id="last-steps" class="section level3">
<h3 class="hasAnchor">
<a href="#last-steps" class="anchor"></a>Last steps</h3>
<p>The last few steps are completed outside of R in Google Sheets, manually adding the missing information to the spreadsheet evaluations of their respective articles.</p>
<p>The Google Sheets file can be found here: <a href="https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381" class="uri">https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381</a>.</p>
</div>
</div>
<div id="colophon" class="section level1">
<h1 class="hasAnchor">
<a href="#colophon" class="anchor"></a>Colophon</h1>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sessioninfo/man/session_info.html">session_info</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 4.1.0 (2021-05-18)
##  os       macOS Big Sur 11.4          
##  system   aarch64, darwin20           
##  ui       X11                         
##  language (EN)                        
##  collate  en_AU.UTF-8                 
##  ctype    en_AU.UTF-8                 
##  tz       Australia/Perth             
##  date     2021-06-22                  
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package                            * version    date       lib
##  assertthat                           0.2.1      2019-03-21 [2]
##  bib2df                             * 1.1.1      2019-05-22 [2]
##  bslib                                0.2.5.1    2021-05-18 [2]
##  cachem                               1.0.5      2021-05-15 [2]
##  cellranger                           1.1.0      2016-07-27 [2]
##  cli                                  2.5.0      2021-04-26 [2]
##  crayon                               1.4.1      2021-02-08 [2]
##  DBI                                  1.1.1      2021-01-15 [2]
##  desc                                 1.3.0      2021-03-05 [2]
##  digest                               0.6.27     2020-10-24 [2]
##  dplyr                              * 1.0.7      2021-06-18 [2]
##  ellipsis                             0.3.2      2021-04-29 [2]
##  evaluate                             0.14       2019-05-28 [2]
##  fansi                                0.5.0      2021-05-25 [2]
##  fastmap                              1.1.0      2021-01-25 [2]
##  fs                                   1.5.0      2020-07-31 [2]
##  gargle                               1.1.0      2021-04-02 [2]
##  generics                             0.1.0      2020-10-31 [2]
##  glue                                 1.4.2      2020-08-27 [2]
##  googledrive                          1.0.1      2020-05-05 [2]
##  googlesheets4                      * 0.3.0      2021-03-04 [2]
##  hms                                  1.1.0      2021-05-17 [2]
##  htmltools                            0.5.1.1    2021-01-22 [2]
##  httr                                 1.4.2      2020-07-20 [2]
##  humaniformat                         0.6.0      2016-04-24 [2]
##  jquerylib                            0.1.4      2021-04-26 [2]
##  jsonlite                             1.7.2      2020-12-09 [2]
##  knitr                                1.33       2021-04-24 [2]
##  lifecycle                            1.0.0      2021-02-15 [2]
##  magrittr                             2.0.1      2020-11-17 [2]
##  memoise                              2.0.0      2021-01-26 [2]
##  pillar                               1.6.1      2021-05-16 [2]
##  pkgconfig                            2.0.3      2019-09-22 [2]
##  pkgdown                              1.6.1      2020-09-12 [2]
##  purrr                                0.3.4      2020-04-17 [2]
##  R6                                   2.5.0      2020-10-28 [2]
##  ragg                                 1.1.3      2021-06-09 [2]
##  Rcpp                                 1.0.6      2021-01-15 [2]
##  readr                              * 1.4.0      2020-10-05 [2]
##  Reproducibility.in.Plant.Pathology * 0.0.1-2    2021-06-22 [1]
##  rlang                                0.4.11     2021-04-30 [2]
##  rmarkdown                            2.9        2021-06-15 [2]
##  rprojroot                            2.0.2      2020-11-15 [2]
##  rstudioapi                           0.13       2020-11-12 [2]
##  sass                                 0.4.0.9000 2021-05-27 [2]
##  sessioninfo                          1.1.1      2018-11-05 [2]
##  sodium                               1.1        2017-03-30 [2]
##  stringi                              1.6.2      2021-05-17 [2]
##  stringr                            * 1.4.0      2019-02-10 [2]
##  systemfonts                          1.0.2      2021-05-11 [2]
##  textshaping                          0.3.5      2021-06-09 [2]
##  tibble                               3.1.2      2021-05-16 [2]
##  tidyselect                           1.1.1      2021-04-30 [2]
##  utf8                                 1.2.1      2021-03-12 [2]
##  vctrs                                0.3.8      2021-04-29 [2]
##  withr                                2.4.2      2021-04-18 [2]
##  xfun                                 0.24       2021-06-15 [2]
##  yaml                                 2.2.1      2020-02-01 [2]
##  source                       
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  local                        
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  Github (rstudio/sass@f148415)
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
##  CRAN (R 4.1.0)               
## 
## [1] /private/var/folders/hc/tft3s5bn48gb81cs99mycyf00000gn/T/RtmpveS9nz/temp_libpath5734336332c3
## [2] /Users/adamsparks/Library/R/4.1/library
## [3] /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/library</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam H. Sparks, Emerson M. Del Ponte, Kaique dos Santos Alves, Zachary S. L. Foster, Niklaus J. Grünwald.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
